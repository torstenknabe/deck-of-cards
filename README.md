# HTML5 Deck of Cards

This is a fork of HTML5 Deck of Cards at https://deck.of.cards/old. This fork was made to allow for custom cards to be used for a homebrew Dungeons and Dragons (D&D) game based around the Crystal Gems universe from the show Steven Universe.

Card graphics were made by the GM and made digital to allow the group to play remotely during quarantine.

## License

LGPL if you use Chris Aguilar's [vector playing cards](http://sourceforge.net/projects/vector-cards/). Otherwise MIT.

## Usage

I've written this as an entirely flat and client side site with locally hosted files, this means that everything happens locally in a users browser and is not shared between players.

To get setup, you'll want to download the players folder from the project. Then take a look at one of the gem named files. This readme will use Ruby as the example. Inside the Ruby.html file are several notable items.

### Overview

1. Each character has their own deck of cards and page. They each have information that is independent of other players.
2. I've added two popups to the site to allow for quick access to in game information. These are different for each player. They are defined by the popup.js file. That popup was modified from here: https://medium.com/@GistCoding/simple-popup-modal-with-vanilla-javascript-a14515ec630b with edits mostly for more semantic HTML markup.
3. Other than the popup text, the majority of the content on each page is entirely generated by javascript. There are two pieces to this - the deck.js file that is the engine for running all of the cards, and the ruby.init.js file that initializes the engine for that specific page. The deck.js file is shared for all players, but each player has their own init file because they each use different decks of cards with different counts for those cards.
4. Everything happens locally in the browser client side, so you can technically run this locally without a problem, or just throw all the files on a server.

### init.js

1. The init.js file for each player determines what their page gets generated with. You can uncomment different $topbar buttons to get additional functionality from deck.js. However, they were not needed for my game. The $poker and $fan options were sometimes helpful.
2. The key part to generating each of the unique the decks is var deck = Deck(15). The function parameter is the total number of cards you need to generate. This is taking advantage of the function Deck(joker) in deck.js to generate decks of cards with non-standard numbers of cards.
3. At the bottom of the init file is where you mount the entire deck and then shuffle it twice.

### main.css

1. I've added a unique ID to each player page. This allows me to target my CSS to each page, but allows me to have one CSS file for all players for ease of maintenance.
2. The backs of the deck are defined by #ruby .card .back and just update that file.
3. The deck.js still generates class names for the original 52 card deck, so I'm using those to style with new images, and just appending the images for the cards with the unique ID for each page.
4. If a new card gets added you need to adjust the init.js file for that specific deck to increase the Deck(X) number, and also style the additional cards in the main.css file, and appropriately link the images for that card.

### ruby.html

1. To update the content of the popup, simply adjust the HTML inside of the two asides.

### File structure

1. I haven't modified most things in the fork. I've added the new modifications to the players folder and the contents within that.
2. I've also added the original cards and all potential cards to the all-cards folder.

### Full example

Available at : https://speakerjones.com/ruby.html


### Javascript API

#### Deck

``` js
// Instantiate a deck
var deck = Deck();

// display it in a html container
var $container = document.getElementById('container');
deck.mount($container);
```

Deck example: http://jsfiddle.net/ec4kcx1k/

``` js
// Flip all cards in deck
deck.flip();

// Sort cards
deck.sort();

// Shuffle
deck.shuffle();

// Display fan
deck.fan();

// Remove deck from html container, hide it
deck.unmount();
```

Shuffle cards and fan: http://jsfiddle.net/favbdkta/

Deck with jokers:

``` js
// Instanciate a deck with jokers
var deck = Deck(true);
```


#### Card

``` js
// Select the first card
var card = deck.cards[0];

// Add it to an html container
card.mount($container);

// Allow to move/drag it
card.enableDragging();
card.disableDragging();

// Allow to flip it
card.enableFlipping();
card.disableFlipping();

// Flip card
card.flip();

// Display card front or back
card.setSide('front');
card.setSide('back');
```

Draggable and flippable card: http://jsfiddle.net/cgz9mjts/


#### Card in deck

Remove a card from a deck

``` js
var deck = Deck();

// Remove 10 cards starting from the 6th
var removedCards = deck.cards.splice(5, 10);

removedCards.forEach(function (removedCard) {
    removedCard.unmount();
});
```

Deck without Clubs: http://jsfiddle.net/L25facxj/

## Future potential work

- Create a discard pile so that only face down cards are shuffled and not all cards
- Make the popup work better with keyboards and focus states
- Add text backups to images
